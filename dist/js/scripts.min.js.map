{"version":3,"file":"scripts.min.js","sources":["src/js/scripts.js"],"sourcesContent":["// Array.from() polyfill\nif ( ! Array.from ) {\n  Array.from = ( function() {\n    var toStr = Object.prototype.toString;\n    var isCallable = function( fn ) {\n      return 'function' === typeof fn || '[object Function]' === toStr.call( fn );\n    };\n    var toInteger = function( value ) {\n      var number = Number( value );\n      if ( isNaN( number ) ) {\n        return 0;\n      }\n      if ( 0 === number || ! isFinite( number ) ) {\n        return number;\n      }\n      return ( 0 < number ? 1 : -1 ) * Math.floor( Math.abs( number ) );\n    };\n    var maxSafeInteger = Math.pow( 2, 53 ) - 1;\n    var toLength = function( value ) {\n      var len = toInteger( value );\n      return Math.min( Math.max( len, 0 ), maxSafeInteger );\n    };\n\n    // The length property of the from method is 1.\n    return function from( arrayLike /*, mapFn, thisArg */ ) {\n      // 1. Let C be the this value.\n      var C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n      var items = Object( arrayLike );\n\n      // 3. ReturnIfAbrupt(items).\n      if ( null == arrayLike ) {\n        throw new TypeError(\n          'Array.from requires an array-like object - not null or undefined'\n        );\n      }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n      var mapFn = 1 < arguments.length ? arguments[1] : void undefined;\n      var T;\n      if ( 'undefined' !== typeof mapFn ) {\n\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if ( ! isCallable( mapFn ) ) {\n          throw new TypeError(\n            'Array.from: when provided, the second argument must be a function'\n          );\n        }\n\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if ( 2 < arguments.length ) {\n          T = arguments[2];\n        }\n      }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n      var len = toLength( items.length );\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method\n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n      var A = isCallable( C ) ? Object( new C( len ) ) : new Array( len );\n\n      // 16. Let k be 0.\n      var k = 0;\n\n      // 17. Repeat, while k < lenâ€¦ (also steps a - h)\n      var kValue;\n      while ( k < len ) {\n        kValue = items[k];\n        if ( mapFn ) {\n          A[k] =\n            'undefined' === typeof T ?\n              mapFn( kValue, k ) :\n              mapFn.call( T, kValue, k );\n        } else {\n          A[k] = kValue;\n        }\n        k += 1;\n      }\n\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n      A.length = len;\n\n      // 20. Return A.\n      return A;\n    };\n  }() );\n}\n\n( function() {\n\n  // Variables. focusTrap() is from the focus trap library that is loaded before this sctipt.\n  const mobileToggle = document.querySelector( '.menu-toggle' );\n  const panel = document.querySelector( '#mobile-nav-overlay' );\n\n  // const trap = focusTrap( panel );\n\n  // const btnClose = document.querySelector( '.menu-close' );\n\n  mobileToggle.addEventListener( 'click', function() {\n    if ( this.classList.contains( 'active' ) ) {\n      this.setAttribute( 'aria-expanded', 'false' );\n      panel.classList.remove( 'open' );\n      setTimeout( () => {\n        panel.classList.remove( 'active' );\n\n        // trap.deactivate();\n      }, 375 );\n    } else {\n      this.setAttribute( 'aria-expanded', 'true' );\n      panel.classList.add( 'active' );\n      setTimeout( () => {\n        panel.classList.add( 'open' );\n        console.log( 'clicked' );\n\n        // trap.activate();\n      }, 50 );\n    }\n\n    this.classList.toggle( 'active' );\n  });\n\n  /****** TOGGLE SUBMENUS ******/\n  const arrows = [ ...document.querySelectorAll( '.toggle-sub-menu' ) ];\n  arrows.forEach( element => {\n    element.addEventListener( 'click', toggleSubMenu );\n  });\n\n  function toggleSubMenu() {\n    if ( 0 == this.nextElementSibling.style.maxHeight ) {\n      this.setAttribute( 'aria-expanded', true );\n      this.nextElementSibling.classList.add( 'open' );\n      setTimeout( () => {\n        this.nextElementSibling.style.maxHeight = '100vh';\n      }, 100 );\n    } else {\n      this.setAttribute( 'aria-expanded', false );\n      this.nextElementSibling.style.maxHeight = this.nextElementSibling.style.maxHeight = null;\n      setTimeout( () => {\n        this.nextElementSibling.classList.remove( 'open' );\n      }, 275 );\n    }\n    this.classList.toggle( 'active' );\n  }\n\n  /****** A11Y ******/\n  const lis = [ ...document.querySelectorAll( '.desktop-main-navigation li' ) ];\n  const anchors = [ ...document.querySelectorAll( '.desktop-main-navigation a' ) ];\n\n  // Function that returns an array of an elements parents (up to the .desktop-main-menu node)\n  const getParents = function( elem ) {\n    const parents = [];\n    for ( ; elem; elem = elem.parentNode ) {\n      if ( elem.classList.contains( 'desktop-main-navigation' ) ) {\n        break;\n      }\n      parents.unshift( elem );\n    }\n    return parents;\n  };\n\n  anchors.forEach( anchor => {\n    anchor.addEventListener( 'focus', () => {\n      const parents = getParents( anchor );\n\n      lis.forEach( li => {\n        li.classList.remove( 'focus' );\n      });\n\n      // If a one level dropdown, add a focus class to the li\n      if (\n        parents[parents.length - 2].classList.contains( 'menu-item-has-children' )\n      ) {\n        anchor.parentElement.classList.add( 'focus' );\n      }\n\n      // If a more than a one level dropdown, add a focus class each li in the \"parents\" array\n      if ( parents[parents.length - 3].classList.contains( 'sub-menu' ) ) {\n        parents.forEach( parent => {\n          if ( 'li' === parent.localName ) {\n            parent.classList.add( 'focus' );\n          }\n        });\n      }\n    });\n\n    // Reset all li's when focus is removed\n    anchor.addEventListener( 'focusout', () => {\n      lis.forEach( li => {\n        li.classList.remove( 'focus' );\n      });\n    });\n  });\n}() );"],"names":["isCallable","fn","toStr","call","toLength","value","len","number","Number","isNaN","isFinite","Math","floor","abs","toInteger","min","max","maxSafeInteger","Array","from","Object","prototype","toString","pow","arrayLike","items","TypeError","T","mapFn","arguments","length","kValue","A","this","k","mobileToggle","document","querySelector","panel","toggleSubMenu","nextElementSibling","style","maxHeight","setAttribute","classList","add","setTimeout","_this","remove","toggle","addEventListener","contains","console","log","querySelectorAll","forEach","element","lis","anchors","anchor","parents","elem","parentNode","unshift","getParents","li","parentElement","parent","localName"],"mappings":"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"}